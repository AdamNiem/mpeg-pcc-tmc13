# Test conditions for N17523 CTC C3.2 & C3.3 using TMC13
#  -- derived from svn:r1262 documentation
#
# todo(df): can these two categories be unified by coding both attrs?
#
---
categories:
  ##
  # Condition 3.2

  # NB, texture to stop complaints about colour/color
  lossless-geom-lossy-texture:
    encflags:
     - mode: 0
     - geometryCodec: 1
     - colorTransform: 1
     - mergeDuplicatedPoints: 0
     - positionQuantizationScale: 1
     - neighbourAvailBoundaryLog2: 9

    decflags:
     - mode: 1

    pcerrorflags:
     - dropdups: 2
     - neighborsProc: 1

    sequences:
      citytunnel_q1mm:
        encflags:
         - &commonAttr
           - numberOfNearestNeighborsInPrediction: 3
           - levelOfDetailCount: 9
           - dist2: 8192
         - quantizationStepLuma:
             r01: 256
             r02: 128
             r03: 64
             r04: 32
             r05: 16
             r06: 8
         - quantizationStepChroma:
             r01: 256
             r02: 128
             r03: 64
             r04: 32
             r05: 16
             r06: 8
         - bitdepth: 8
         - attribute: color

      tollbooth_q1mm:
        encflags:
         - *commonAttr
         - quantizationStepLuma:
             r01: 256
             r02: 128
             r03: 64
             r04: 32
             r05: 16
             r06: 8
         - quantizationStepChroma:
             r01: 256
             r02: 128
             r03: 64
             r04: 32
             r05: 16
             r06: 8
         - bitdepth: 8
         - attribute: color

  ##
  # Condition 3.3

  lossless-geom-lossy-reflectance:
    encflags:
     - mode: 0
     - geometryCodec: 1
     - colorTransform: 1
     - mergeDuplicatedPoints: 0
     - positionQuantizationScale: 1
     - neighbourAvailBoundaryLog2: 9

    decflags:
     - mode: 1

    pcerrorflags:
     - dropdups: 2
     - neighborsProc: 1

    sequences:
      citytunnel_q1mm:
        encflags:
         - *commonAttr
         - quantizationStepLuma:
             r01: $eval{ 255 * 256 }
             r02: $eval{ 255 * 128 }
             r03: $eval{ 255 * 64 }
             r04: $eval{ 255 * 32 }
             r05: $eval{ 255 * 16 }
             r06: $eval{ 255 * 8 }
         - bitdepth: 16
         - attribute: reflectance

      tollbooth_q1mm:
        encflags:
         - *commonAttr
         - quantizationStepLuma:
             r01: $eval{ 255 * 256 }
             r02: $eval{ 255 * 128 }
             r03: $eval{ 255 * 64 }
             r04: $eval{ 255 * 32 }
             r05: $eval{ 255 * 16 }
             r06: $eval{ 255 * 8 }
         - bitdepth: 16
         - attribute: reflectance
