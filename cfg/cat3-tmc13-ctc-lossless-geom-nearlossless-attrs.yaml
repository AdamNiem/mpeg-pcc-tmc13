# Test conditions for N17523 CTC C3.Y & C3.Z using TMC13
#
# todo(df): can these two categories be unified by coding both attrs?
#
---
categories:
  ##
  # Condition 3.Y

  # NB, texture to stop complaints about colour/color
  lossless-geom-nearlossless-texture:
    encflags:
     - mode: 0
     - geometryCodec: 1
     - colorTransform: 0
     - mergeDuplicatedPoints: 0
     - positionQuantizationScale: 1
     - neighbourAvailBoundaryLog2: 9

    decflags:
     - mode: 1

    pcerrorflags:
     - dropdups: 2
     - neighborsProc: 1
     - hausdorff

    sequences:
      citytunnel_q1mm:
        encflags:
         - &mitsubishiNearlosslessAttrs
            - numberOfNearestNeighborsInPrediction: 3
            - levelOfDetailCount: 9
            - dist2: 8192
         - &mitsubishiNearlosslessAttrsColour8
            - *mitsubishiNearlosslessAttrs
            - quantizationStepLuma:
                r01: 2
                r02: 4
                r03: 8
                r04: 16
                r05: 32
            - quantizationStepChroma:
                r01: 2
                r02: 4
                r03: 8
                r04: 16
                r05: 32
            - bitdepth: 8
            - attribute: color

      overpass_q1mm:
        encflags:
         - *mitsubishiNearlosslessAttrsColour8

      tollbooth_q1mm:
        encflags:
         - *mitsubishiNearlosslessAttrsColour8

  ##
  # Condition 3.Z

  lossless-geom-nearlossless-reflectance:
    encflags:
     - mode: 0
     - geometryCodec: 1
     - mergeDuplicatedPoints: 0
     - positionQuantizationScale: 1
     - neighbourAvailBoundaryLog2: 9

    decflags:
     - mode: 1
     - colorTransform: 0

    pcerrorflags:
     - dropdups: 2
     - neighborsProc: 1
     - hausdorff

    sequences:
      citytunnel_q1mm:
        encflags:
         - &mitsubishiNearlosslessAttrsRefl16
            - *mitsubishiNearlosslessAttrs
            - quantizationStepLuma:
                r01: $eval{ 255 * 2 }
                r02: $eval{ 255 * 4 }
                r03: $eval{ 255 * 8 }
                r04: $eval{ 255 * 16 }
                r05: $eval{ 255 * 32 }
            - bitdepth: 16
            - attribute: reflectance

      overpass_q1mm:
        encflags:
         - *mitsubishiNearlosslessAttrsRefl16

      tollbooth_q1mm:
        encflags:
         - *mitsubishiNearlosslessAttrsRefl16

      ford_03_q1mm:
        encflags:
         - &fordNearlosslessAttrsRefl8
            - numberOfNearestNeighborsInPrediction: 3
            - levelOfDetailCount: 6
            - dist2: 16384
            - quantizationStepLuma:
                r01: 2
                r02: 4
                r03: 8
                r04: 16
                r05: 32
            - bitdepth: 8
            - attribute: reflectance

      ford_02_q1mm:
        encflags:
         - *fordNearlosslessAttrsRefl8

      ford_01_q1mm:
        encflags:
         - *fordNearlosslessAttrsRefl8
